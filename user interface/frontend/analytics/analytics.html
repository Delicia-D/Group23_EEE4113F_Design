<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Penguin Analytics</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="analytics.css">
  <link rel="stylesheet" href="../light-mode.css" id="light-mode-stylesheet" disabled>
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#1a73e8">
<link rel="apple-touch-icon" href="/icons/icon-192x192.png">
<meta name="apple-mobile-web-app-status-bar" content="#1a73e8">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="PenguinMonitor">

<!-- This one is in the same folder, so no change needed -->
<link rel="stylesheet" href="light-mode-analytics.css" id="light-mode-analytics-stylesheet" disabled>

</head>
<body>
  <div class="sidebar">
    <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
    <div class="sidebar-item" onclick="window.location.href='../dashboard.html'">
      <i class="fas fa-table"></i>
      <span>Overview</span>
    </div>
    <div class="sidebar-item" onclick="window.location.href='analytics.html'">
      <i class="fas fa-chart-bar"></i>
      <span>Analytics</span>
    </div>
    <div class="sidebar-item" onclick="window.location.href='../upload.html'">
      <i class="fas fa-upload"></i>
      <span>Upload</span>
    </div>
    <div class="sidebar-item" onclick="window.location.href='../login.html'">
      <i class="fas fa-sign-out-alt"></i>
      <span>Sign Out</span>
    </div>
    <div class="sidebar-item" id="themeToggle">
  <i class="fas fa-moon"></i>
  <span>Toggle Theme</span>
</div>
  </div>

  <div class="main-content">
   <div class="summary-title">
  <i class="fas fa-chart-bar" style="color: #1a73e8; margin-right: 8px;"></i>
  Penguin Colony Summary
</div>


    <div class="analytics-summary">
      <div class="summary-card">
        <h2>Total Penguins</h2>
        <p id="totalPenguins">--</p>
      </div>
      <div class="summary-card">
        <h2>Average Weight</h2>
        <p id="avgWeight">-- kg</p>
      </div>
      <div class="summary-card">
        <h2>Outlier Penguins</h2>
        <p id="outlierCount">--</p>
      </div>
      <div class="summary-card">
        <h2>Avg. Underweight</h2>
        <p id="avgUnderweight">-- kg</p>
      </div>

      <div class="summary-card" style="grid-column: span 2;">
        <h2>Penguins under <span id="sliderValue">50</span> kg</h2>
       <input type="range" min="0" max="10" value="4" step="0.1" id="thresholdSlider" />
        <p id="underweightResult">-- penguins</p>
<progress id="underweightBar" value="0" max="180" style="width: 100%; height: 8px;"></progress>
      </div>
    </div>

    <div class="data-row">
      <div class="heatmap-section">
        <h2>Penguin Activity (Heatmap)</h2>
        <div style="display: flex; gap: 20px; margin: 10px 0 20px 0;">
          <div><span style="background-color:#2e7d32; width:15px; height:15px; display:inline-block; border-radius:4px;"></span> very recent (≤1 day)</div>
          <div><span style="background-color:#f9a825; width:15px; height:15px; display:inline-block; border-radius:4px;"></span> Recent (≤7 days)</div>
          <div><span style="background-color:#c62828; width:15px; height:15px; display:inline-block; border-radius:4px;"></span> Stale (>7 days)</div>
        </div>
        <div id="heatmapGrid" class="heatmap-grid"></div>
      </div>

      <div class="chart-section">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
          <h2>Penguin Weights</h2>
          <div style="display: flex; gap: 10px; align-items: center;">
            <input type="date" id="startDate">
            <span>to</span>
            <input type="date" id="endDate">
            <button id="applyDateRange">Apply</button>
          </div>
        </div>
        <canvas id="weightBarChart" style="height: 300px; max-height: 300px; width: 100%;"></canvas>
      </div>
    </div>

  <!-- In analytics.html, update the outlier panel div to: -->
<div id="outlierPanel" class="outlier-panel hidden">
  <div class="outlier-header">
    <h3>Penguin Details</h3>
    <button id="closeOutlierBtn">×</button>
  </div>
  <div id="outlierList" class="outlier-list">
    <!-- Content will be filled dynamically -->
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="analytics.js"></script>
</body>
</html>